{
  "data": {
    "repository": {
      "issue": {
        "number": 600,
        "title": "[BUG]: Compatibility Issue with Julia Version When Using PySR",
        "body": "### What happened?\r\n\r\n\r\n\r\nHi,\r\n\r\nI am encountering an issue when attempting to use PySR with a specific version of Julia. Despite setting the `JULIA_EXE` environment variable to point to my installed Julia version (1.10.0), the PySR setup seems to attempt reinstalling Julia, which results in a version compatibility issue and subsequently fails with an `AssertionError`.\r\n\r\n**Environment Details:**\r\n- **OS**: Ubuntu Linux\r\n- **Python Version**: 3.11\r\n- **PySR Version**: v0.18.2\r\n- **Julia Version Used**: 1.10.0\r\n\r\n**Steps to Reproduce:**\r\n1. Set the `JULIA_EXE` environment variable:\r\n   ```python\r\n   import os\r\n   os.environ[\"JULIA_EXE\"] = \"/home/ubuntu/.julia/juliaup/julia-1.10.0+0.x64.linux.gnu/bin/julia\"\r\n   ```\r\n2. Import PySR:\r\n   ```python\r\n   from pysr import PySRRegressor\r\n   ```\r\n\r\n**Expected Behavior:**\r\nPySR uses the specified version of Julia without attempting to reinstall or validate against other versions, especially since the specified version is already compliant with PySR's requirements.\r\n\r\n**Actual Behavior:**\r\nAn error sequence initiates with a message about locating and installing Julia 1.10.0, followed by a compatibility warning and an `AssertionError`. Here's the relevant part of the traceback:\r\n```\r\n[juliapkg] Locating Julia ~1.6.7, ~1.7, ~1.8, ~1.9, =1.10.0\r\n[juliapkg] WARNING: You have Julia 1.10.2 installed but ~1.6.7, ~1.7, ~1.8, ~1.9, =1.10.0 is required.\r\n...\r\nAssertionError\r\n```\r\n\r\n\r\n\r\nCould you please help in resolving this version compatibility issue? It seems there might be a need for clearer handling or documentation regarding the use of specific Julia versions with PySR.\r\n\r\nThank you for your assistance and for developing this useful tool!\r\n\r\nSincerely,\r\nEd\r\n\r\n### Version\r\n\r\nv0.18.2\r\n\r\n### Operating System\r\n\r\nLinux\r\n\r\n### Package Manager\r\n\r\nNone\r\n\r\n### Interface\r\n\r\nIPython Terminal\r\n\r\n### Relevant log output\r\n\r\n```shell\r\nIn [1]: import os\r\n   ...: # Replace the path below with the exact path to the required Julia version executable\r\n   ...: os.environ[\"JULIA_EXE\"] = \"/home/ubuntu/.julia/juliaup/julia-1.10.0+0.x64.linux.gnu/bin/julia\"\r\n   ...:\r\n   ...: # Now, import PySR\r\n   ...: from pysr import PySRRegressor\r\n   ...:\r\n[juliapkg] Locating Julia ~1.6.7, ~1.7, ~1.8, ~1.9, =1.10.0\r\n[juliapkg] Installing Julia 1.10.0 using JuliaUp\r\n[juliapkg] WARNING: You have Julia 1.10.2 installed but ~1.6.7, ~1.7, ~1.8, ~1.9, =1.10.0 is required.\r\n[juliapkg]   It is recommended that you upgrade Julia or install JuliaUp.\r\n[juliapkg] Querying Julia versions from https://julialang-s3.julialang.org/bin/versions.json\r\n[juliapkg] WARNING: About to install Julia 1.10.0 to /home/ubuntu/storage1/anaconda3/julia_env/pyjuliapkg/install.\r\n[juliapkg]   If you use juliapkg in more than one environment, you are likely to have Julia\r\n[juliapkg]   installed in multiple locations. It is recommended to install JuliaUp\r\n[juliapkg]   (https://github.com/JuliaLang/juliaup) or Julia (https://julialang.org/downloads)\r\n[juliapkg]   yourself.\r\n[juliapkg] Downloading Julia from https://julialang-s3.julialang.org/bin/linux/x64/1.10/julia-1.10.0-linux-x86_64.tar.gz\r\n             download complete\r\n[juliapkg] Verifying download\r\n[juliapkg] Installing Julia 1.10.0 to /home/ubuntu/storage1/anaconda3/julia_env/pyjuliapkg/install\r\n---------------------------------------------------------------------------\r\nAssertionError                            Traceback (most recent call last)\r\nCell In[1], line 6\r\n      3 os.environ[\"JULIA_EXE\"] = \"/home/ubuntu/.julia/juliaup/julia-1.10.0+0.x64.linux.gnu/bin/julia\"\r\n      5 # Now, import PySR\r\n----> 6 from pysr import PySRRegressor\r\n\r\nFile ~/storage1/anaconda3/lib/python3.11/site-packages/pysr/__init__.py:4\r\n      1 # This must be imported as early as possible to prevent\r\n      2 # library linking issues caused by numpy/pytorch/etc. importing\r\n      3 # old libraries:\r\n----> 4 from .julia_import import jl, SymbolicRegression  # isort:skip\r\n      6 from . import sklearn_monkeypatch\r\n      7 from .deprecated import best, best_callable, best_row, best_tex, install, pysr\r\n\r\nFile ~/storage1/anaconda3/lib/python3.11/site-packages/pysr/julia_import.py:38\r\n     30     for k, default in (\r\n     31         (\"PYTHON_JULIACALL_HANDLE_SIGNALS\", \"yes\"),\r\n     32         (\"PYTHON_JULIACALL_THREADS\", \"auto\"),\r\n     33         (\"PYTHON_JULIACALL_OPTLEVEL\", \"3\"),\r\n     34     ):\r\n     35         os.environ[k] = os.environ.get(k, default)\r\n---> 38 from juliacall import Main as jl  # type: ignore\r\n     40 jl_version = (jl.VERSION.major, jl.VERSION.minor, jl.VERSION.patch)\r\n     42 # Next, automatically load the juliacall extension if we're in a Jupyter notebook\r\n\r\nFile ~/storage1/anaconda3/lib/python3.11/site-packages/juliacall/__init__.py:251\r\n    234         if Base.Threads.nthreads() > 1:\r\n    235             # a warning to help multithreaded users\r\n    236             # TODO: should we set PYTHON_JULIACALL_HANDLE_SIGNALS=yes whenever PYTHON_JULIACALL_THREADS != 1?\r\n    237             warnings.warn(\r\n    238                 \"Julia was started with multiple threads \"\r\n    239                 \"but multithreading support is experimental in JuliaCall. \"\r\n   (...)\r\n    248                 \"PYTHON_JULIACALL_HANDLE_SIGNALS=no.\"\r\n    249             )\r\n--> 251 init()\r\n    253 def load_ipython_extension(ip):\r\n    254     import juliacall.ipython\r\n\r\nFile ~/storage1/anaconda3/lib/python3.11/site-packages/juliacall/__init__.py:158, in init()\r\n    155 import juliapkg\r\n    157 # Find the Julia executable and project\r\n--> 158 CONFIG['exepath'] = exepath = juliapkg.executable()\r\n    159 CONFIG['project'] = project = juliapkg.project()\r\n    161 # Find the Julia library\r\n\r\nFile ~/storage1/anaconda3/lib/python3.11/site-packages/juliapkg/deps.py:303, in executable()\r\n    302 def executable():\r\n--> 303     resolve()\r\n    304     return STATE['executable']\r\n\r\nFile ~/storage1/anaconda3/lib/python3.11/site-packages/juliapkg/deps.py:241, in resolve(force, dry_run)\r\n    239 # find a compatible julia executable\r\n    240 log(f'Locating Julia{\"\" if compat is None else \" \"+str(compat)}')\r\n--> 241 exe, ver = find_julia(compat=compat, prefix=STATE['install'], install=True, upgrade=True)\r\n    242 log(f'Using Julia {ver} at {exe}')\r\n    243 # set up the project\r\n\r\nFile ~/storage1/anaconda3/lib/python3.11/site-packages/juliapkg/find_julia.py:91, in find_julia(compat, prefix, install, upgrade)\r\n     89 pr_ver = julia_version(pr_exe)\r\n     90 assert pr_ver is not None\r\n---> 91 assert compat is None or pr_ver in compat\r\n     92 assert bestcompat is None or pr_ver in bestcompat\r\n     93 return (pr_exe, pr_ver)\r\n\r\nAssertionError:\r\n```\r\n\r\n\r\n### Extra Info\r\n\r\n_No response_",
        "comments": {
          "nodes": [
            {
              "author": {
                "login": "MilesCranmer"
              },
              "body": "I think the right variable is `PYTHON_JULIACALL_BINDIR` and should pass the directory of the `julia` binary: https://juliapy.github.io/PythonCall.jl/stable/juliacall/#julia-config\r\n\r\nMaybe try that instead and see if it works?",
              "createdAt": "2024-04-18T12:40:29Z"
            },
            {
              "author": {
                "login": "ewijaya"
              },
              "body": "> I think the right variable is `PYTHON_JULIACALL_BINDIR` and should pass the directory of the `julia` binary: https://juliapy.github.io/PythonCall.jl/stable/juliacall/#julia-config\r\n> \r\n> Maybe try that instead and see if it works?\r\n\r\nHi Miles, \r\n\r\nThanks for you reply. I tried, but get another error:\r\n\r\n```\r\nIn [1]: import os\r\n\r\nIn [2]: os.environ[\"PYTHON_JULIACALL_BINDIR\"] = \"/home/ubuntu/.julia/juliaup/julia-1.10.0+0.x64.linux.gnu/bin/\"\r\n\r\nIn [3]: from pysr import PySRRegressor\r\n[juliapkg] Locating Julia ~1.6.7, ~1.7, ~1.8, ~1.9, =1.10.0\r\n[juliapkg] Querying Julia versions from https://julialang-s3.julialang.org/bin/versions.json\r\n[juliapkg] Using Julia 1.10.0 at /home/ubuntu/storage1/anaconda3/julia_env/pyjuliapkg/install/bin/julia\r\n[juliapkg] Using Julia project at /home/ubuntu/storage1/anaconda3/julia_env\r\n[juliapkg] Installing packages:\r\n           julia> import Pkg\r\n           julia> Pkg.Registry.update()\r\n           julia> Pkg.add([Pkg.PackageSpec(name=\"SymbolicRegression\", uuid=\"8254be44-1295-4e6a-a16d-46603ac705cb\"), Pkg.PackageSpec(name=\"Serialization\", uuid=\"9e88b42a-f829-5b0c-bbe9-9e923198166b\"), Pkg.PackageSpec(name=\"PythonCall\", uuid=\"6099a3de-0909-46bc-b1f4-468b9a2dfc0d\")])\r\n           julia> Pkg.resolve()\r\n           julia> Pkg.precompile()\r\n    Updating registry at `~/.julia/registries/General.toml`\r\n   Resolving package versions...\r\n    Updating `~/storage1/anaconda3/julia_env/Project.toml`\r\n  [6099a3de] + PythonCall v0.9.19\r\n  [8254be44] + SymbolicRegression v0.24.2\r\n    Updating `~/storage1/anaconda3/julia_env/Manifest.toml`\r\n  [79e6a3ab] + Adapt v4.0.4\r\n  [4fba245c] + ArrayInterface v7.9.0\r\n  [bbf7d656] + CommonSubexpressions v0.3.0\r\n  [34da2185] + Compat v4.14.0\r\n  [992eb4ea] + CondaPkg v0.2.22\r\n  [187b0558] + ConstructionBase v1.5.5\r\n  [9a962f9c] + DataAPI v1.16.0\r\n  [864edb3b] + DataStructures v0.18.20\r\n  [e2d170a0] + DataValueInterfaces v1.0.0\r\n  [163ba53b] + DiffResults v1.1.0\r\n  [b552c78f] + DiffRules v1.15.1\r\n  [ffbed154] + DocStringExtensions v0.9.3\r\n  [a40a106e] + DynamicExpressions v0.16.0\r\n  [06fc5a27] + DynamicQuantities v0.13.2\r\n  [1a297f60] + FillArrays v1.10.0\r\n  [6a86dc24] + FiniteDiff v2.23.1\r\n  [f6369f11] + ForwardDiff v0.10.36\r\n  [92d709cd] + IrrationalConstants v0.2.2\r\n  [82899510] + IteratorInterfaceExtensions v1.0.0\r\n  [692b3bcd] + JLLWrappers v1.5.0\r\n  [0f8b85d8] + JSON3 v1.14.0\r\n  [d3d80556] + LineSearches v7.2.0\r\n  [2ab3a3ac] + LogExpFunctions v0.3.27\r\n  [30fc2ffe] + LossFunctions v0.11.1\r\n  [e80e1ace] + MLJModelInterface v1.9.6\r\n  [1914dd2f] + MacroTools v0.5.13\r\n  [0b3b1443] + MicroMamba v0.1.14\r\n  [e1d29d7a] + Missings v1.2.0\r\n  [d41bc354] + NLSolversBase v7.8.3\r\n  [77ba4419] + NaNMath v1.0.2\r\n  [429524aa] + Optim v1.9.4\r\n  [bac558e1] + OrderedCollections v1.6.3\r\n  [65ce6f38] + PackageExtensionCompat v1.0.2\r\n  [d96e819e] + Parameters v0.12.3\r\n  [69de0a69] + Parsers v2.8.1\r\n  [fa939f87] + Pidfile v1.3.0\r\n  [85a6dd25] + PositiveFactorizations v0.2.4\r\n  [aea7be01] + PrecompileTools v1.2.1\r\n  [21216c6a] + Preferences v1.4.3\r\n  [49802e3a] + ProgressBars v1.5.1\r\n  [6099a3de] + PythonCall v0.9.19\r\n  [189a3867] + Reexport v1.2.2\r\n  [ae029012] + Requires v1.3.0\r\n  [30f210dd] + ScientificTypesBase v3.0.0\r\n  [6c6a2e73] + Scratch v1.2.1\r\n  [efcf1570] + Setfield v1.1.1\r\n  [a2af1166] + SortingAlgorithms v1.2.1\r\n  [276daf66] + SpecialFunctions v2.3.1\r\n  [1e83bf80] + StaticArraysCore v1.4.2\r\n  [64bff920] + StatisticalTraits v3.2.0\r\n  [82ae8749] + StatsAPI v1.7.0\r\n  [2913bbd2] + StatsBase v0.34.3\r\n  [856f2bd8] + StructTypes v1.10.0\r\n  [8254be44] + SymbolicRegression v0.24.2\r\n  [3783bdb8] + TableTraits v1.0.1\r\n  [bd369af6] + Tables v1.11.1\r\n  [410a4b4d] + Tricks v0.1.8\r\n  [3a884ed6] + UnPack v1.0.2\r\n  [e17b2a0c] + UnsafePointers v1.0.0\r\n  [efe28fd5] + OpenSpecFun_jll v0.5.5+0\r\n  [f8abcde7] + micromamba_jll v1.5.8+0\r\n  [0dad84c5] + ArgTools v1.1.1\r\n  [56f22d72] + Artifacts\r\n  [2a0f44e3] + Base64\r\n  [ade2ca70] + Dates\r\n  [8ba89e20] + Distributed\r\n  [f43a241f] + Downloads v1.6.0\r\n  [7b1f6079] + FileWatching\r\n  [9fa8497b] + Future\r\n  [b77e0a4c] + InteractiveUtils\r\n  [4af54fe1] + LazyArtifacts\r\n  [b27032c2] + LibCURL v0.6.4\r\n  [76f85450] + LibGit2\r\n  [8f399da3] + Libdl\r\n  [37e2e46d] + LinearAlgebra\r\n  [56ddb016] + Logging\r\n  [d6f4376e] + Markdown\r\n  [a63ad114] + Mmap\r\n  [ca575930] + NetworkOptions v1.2.0\r\n  [44cfe95a] + Pkg v1.10.0\r\n  [de0858da] + Printf\r\n  [3fa0cd96] + REPL\r\n  [9a3f8284] + Random\r\n  [ea8e919c] + SHA v0.7.0\r\n  [9e88b42a] + Serialization\r\n  [6462fe0b] + Sockets\r\n  [2f01184e] + SparseArrays v1.10.0\r\n  [10745b16] + Statistics v1.10.0\r\n  [4607b0f0] + SuiteSparse\r\n  [fa267f1f] + TOML v1.0.3\r\n  [a4e569a6] + Tar v1.10.0\r\n  [8dfed614] + Test\r\n  [cf7118a7] + UUIDs\r\n  [4ec0a83e] + Unicode\r\n  [e66e0078] + CompilerSupportLibraries_jll v1.0.5+1\r\n  [deac9b47] + LibCURL_jll v8.4.0+0\r\n  [e37daf67] + LibGit2_jll v1.6.4+0\r\n  [29816b5a] + LibSSH2_jll v1.11.0+1\r\n  [c8ffd9c3] + MbedTLS_jll v2.28.2+1\r\n  [14a3606d] + MozillaCACerts_jll v2023.1.10\r\n  [4536629a] + OpenBLAS_jll v0.3.23+2\r\n  [05823500] + OpenLibm_jll v0.8.1+2\r\n  [bea87d4a] + SuiteSparse_jll v7.2.1+1\r\n  [83775a58] + Zlib_jll v1.2.13+1\r\n  [8e850b90] + libblastrampoline_jll v5.8.0+1\r\n  [8e850ede] + nghttp2_jll v1.52.0+1\r\n  [3f19e933] + p7zip_jll v17.4.0+2\r\n  No Changes to `~/storage1/anaconda3/julia_env/Project.toml`\r\n  No Changes to `~/storage1/anaconda3/julia_env/Manifest.toml`\r\n\r\n[3793] signal (11.1): Segmentation fault\r\nin expression starting at none:2\r\ninitialize_env at /workspace/srcdir/gcc-13.2.0/libgomp/env.c:2062\r\nunknown function (ip: 0x7f1e8ef56b99)\r\nunknown function (ip: 0x7f1e8ef56ca0)\r\n_dl_catch_exception at /lib/x86_64-linux-gnu/libc.so.6 (unknown line)\r\nunknown function (ip: 0x7f1e8ef5b0ce)\r\n_dl_catch_exception at /lib/x86_64-linux-gnu/libc.so.6 (unknown line)\r\nunknown function (ip: 0x7f1e8ef5a609)\r\nunknown function (ip: 0x7f1e8eef934b)\r\n_dl_catch_exception at /lib/x86_64-linux-gnu/libc.so.6 (unknown line)\r\n_dl_catch_error at /lib/x86_64-linux-gnu/libc.so.6 (unknown line)\r\nunknown function (ip: 0x7f1e8eef9b58)\r\ndlopen at /lib/x86_64-linux-gnu/libdl.so.2 (unknown line)\r\nijl_load_dynamic_library at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/dlload.c:365\r\n#dlopen#3 at ./libdl.jl:117\r\ndlopen at ./libdl.jl:116 [inlined]\r\ndlopen at ./libdl.jl:116\r\njfptr_dlopen_51523.1 at /home/ubuntu/.julia/juliaup/julia-1.10.0+0.x64.linux.gnu/lib/julia/sys.so (unknown line)\r\n_jl_invoke at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/gf.c:2894 [inlined]\r\nijl_apply_generic at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/gf.c:3076\r\n__init__ at /home/ubuntu/.julia/juliaup/julia-1.10.0+0.x64.linux.gnu/share/julia/stdlib/v1.10/CompilerSupportLibraries_jll/src/CompilerSupportLibraries_jll.jl:62\r\n_jl_invoke at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/gf.c:2894 [inlined]\r\nijl_apply_generic at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/gf.c:3076\r\njl_apply at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/julia.h:1982 [inlined]\r\njl_module_run_initializer at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/toplevel.c:76\r\nrun_module_init at ./loading.jl:1128\r\nregister_restored_modules at ./loading.jl:1116\r\n_include_from_serialized at ./loading.jl:1061\r\n_tryrequire_from_serialized at ./loading.jl:1525\r\nunknown function (ip: 0x7f1e88db625f)\r\n_require at ./loading.jl:1984\r\n__require_prelocked at ./loading.jl:1806\r\njfptr___require_prelocked_80742.1 at /home/ubuntu/.julia/juliaup/julia-1.10.0+0.x64.linux.gnu/lib/julia/sys.so (unknown line)\r\n_jl_invoke at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/gf.c:2894 [inlined]\r\nijl_apply_generic at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/gf.c:3076\r\njl_apply at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/julia.h:1982 [inlined]\r\njl_f__call_in_world at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/builtins.c:831\r\n#invoke_in_world#3 at ./essentials.jl:921 [inlined]\r\ninvoke_in_world at ./essentials.jl:918 [inlined]\r\n_require_prelocked at ./loading.jl:1797\r\nmacro expansion at ./loading.jl:1784 [inlined]\r\nmacro expansion at ./lock.jl:267 [inlined]\r\n__require at ./loading.jl:1747\r\njfptr___require_80707.1 at /home/ubuntu/.julia/juliaup/julia-1.10.0+0.x64.linux.gnu/lib/julia/sys.so (unknown line)\r\n_jl_invoke at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/gf.c:2894 [inlined]\r\nijl_apply_generic at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/gf.c:3076\r\njl_apply at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/julia.h:1982 [inlined]\r\njl_f__call_in_world at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/builtins.c:831\r\n#invoke_in_world#3 at ./essentials.jl:921 [inlined]\r\ninvoke_in_world at ./essentials.jl:918 [inlined]\r\nrequire at ./loading.jl:1740\r\njfptr_require_80704.1 at /home/ubuntu/.julia/juliaup/julia-1.10.0+0.x64.linux.gnu/lib/julia/sys.so (unknown line)\r\n_jl_invoke at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/gf.c:2894 [inlined]\r\nijl_apply_generic at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/gf.c:3076\r\njl_apply at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/julia.h:1982 [inlined]\r\ndo_call at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/interpreter.c:126\r\neval_value at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/interpreter.c:223\r\neval_stmt_value at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/interpreter.c:174 [inlined]\r\neval_body at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/interpreter.c:617\r\neval_body at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/interpreter.c:544\r\njl_interpret_toplevel_thunk at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/interpreter.c:775\r\njl_toplevel_eval_flex at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/toplevel.c:934\r\njl_toplevel_eval_flex at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/toplevel.c:877\r\nijl_toplevel_eval_in at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/toplevel.c:985\r\nijl_eval_string at /cache/build/builder-amdci4-6/julialang/julia-release-1-dot-10/src/jlapi.c:117\r\nffi_call_unix64 at /home/ubuntu/storage1/anaconda3/lib/python3.11/lib-dynload/../../libffi.so.8 (unknown line)\r\nffi_call_int at /home/ubuntu/storage1/anaconda3/lib/python3.11/lib-dynload/../../libffi.so.8 (unknown line)\r\nffi_call at /home/ubuntu/storage1/anaconda3/lib/python3.11/lib-dynload/../../libffi.so.8 (unknown line)\r\n_call_function_pointer at /usr/local/src/conda/python-3.11.5/Modules/_ctypes/callproc.c:923 [inlined]\r\n_ctypes_callproc at /usr/local/src/conda/python-3.11.5/Modules/_ctypes/callproc.c:1262\r\nPyCFuncPtr_call at /usr/local/src/conda/python-3.11.5/Modules/_ctypes/_ctypes.c:4201\r\n_PyObject_MakeTpCall at /usr/local/src/conda/python-3.11.5/Objects/call.c:214\r\n_PyEval_EvalFrameDefault at /usr/local/src/conda/python-3.11.5/Python/ceval.c:4774\r\n_PyEval_EvalFrame at /usr/local/src/conda/python-3.11.5/Include/internal/pycore_ceval.h:73 [inlined]\r\n_PyEval_Vector at /usr/local/src/conda/python-3.11.5/Python/ceval.c:6439\r\nPyEval_EvalCode at /usr/local/src/conda/python-3.11.5/Python/ceval.c:1154\r\nbuiltin_exec_impl at /usr/local/src/conda/python-3.11.5/Python/bltinmodule.c:1077 [inlined]\r\nbuiltin_exec at /usr/local/src/conda/python-3.11.5/Python/clinic/bltinmodule.c.h:465\r\ncfunction_vectorcall_FASTCALL_KEYWORDS at /usr/local/src/conda/python-3.11.5/Objects/methodobject.c:443\r\ndo_call_core at /usr/local/src/conda/python-3.11.5/Python/ceval.c:7329 [inlined]\r\n_PyEval_EvalFrameDefault at /usr/local/src/conda/python-3.11.5/Python/ceval.c:5381\r\n_PyEval_EvalFrame at /usr/local/src/conda/python-3.11.5/Include/internal/pycore_ceval.h:73 [inlined]\r\n_PyEval_Vector at /usr/local/src/conda/python-3.11.5/Python/ceval.c:6439 [inlined]\r\n_PyFunction_Vectorcall at /usr/local/src/conda/python-3.11.5/Objects/call.c:393\r\n_PyObject_VectorcallTstate at /usr/local/src/conda/python-3.11.5/Include/internal/pycore_call.h:92 [inlined]\r\nobject_vacall at /usr/local/src/conda/python-3.11.5/Objects/call.c:819\r\nPyObject_CallMethodObjArgs at /usr/local/src/conda/python-3.11.5/Objects/call.c:879\r\nimport_find_and_load at /usr/local/src/conda/python-3.11.5/Python/import.c:1737 [inlined]\r\nPyImport_ImportModuleLevelObject at /usr/local/src/conda/python-3.11.5/Python/import.c:1836\r\nimport_name at /usr/local/src/conda/python-3.11.5/Python/ceval.c:7429 [inlined]\r\n_PyEval_EvalFrameDefault at /usr/local/src/conda/python-3.11.5/Python/ceval.c:3951\r\n_PyEval_EvalFrame at /usr/local/src/conda/python-3.11.5/Include/internal/pycore_ceval.h:73 [inlined]\r\n_PyEval_Vector at /usr/local/src/conda/python-3.11.5/Python/ceval.c:6439\r\nPyEval_EvalCode at /usr/local/src/conda/python-3.11.5/Python/ceval.c:1154\r\nbuiltin_exec_impl at /usr/local/src/conda/python-3.11.5/Python/bltinmodule.c:1077 [inlined]\r\nbuiltin_exec at /usr/local/src/conda/python-3.11.5/Python/clinic/bltinmodule.c.h:465\r\ncfunction_vectorcall_FASTCALL_KEYWORDS at /usr/local/src/conda/python-3.11.5/Objects/methodobject.c:443\r\ndo_call_core at /usr/local/src/conda/python-3.11.5/Python/ceval.c:7329 [inlined]\r\n_PyEval_EvalFrameDefault at /usr/local/src/conda/python-3.11.5/Python/ceval.c:5381\r\n_PyEval_EvalFrame at /usr/local/src/conda/python-3.11.5/Include/internal/pycore_ceval.h:73 [inlined]\r\n_PyEval_Vector at /usr/local/src/conda/python-3.11.5/Python/ceval.c:6439 [inlined]\r\n_PyFunction_Vectorcall at /usr/local/src/conda/python-3.11.5/Objects/call.c:393\r\n_PyObject_VectorcallTstate at /usr/local/src/conda/python-3.11.5/Include/internal/pycore_call.h:92 [inlined]\r\nobject_vacall at /usr/local/src/conda/python-3.11.5/Objects/call.c:819\r\nPyObject_CallMethodObjArgs at /usr/local/src/conda/python-3.11.5/Objects/call.c:879\r\nimport_find_and_load at /usr/local/src/conda/python-3.11.5/Python/import.c:1737 [inlined]\r\nPyImport_ImportModuleLevelObject at /usr/local/src/conda/python-3.11.5/Python/import.c:1836\r\nimport_name at /usr/local/src/conda/python-3.11.5/Python/ceval.c:7429 [inlined]\r\n_PyEval_EvalFrameDefault at /usr/local/src/conda/python-3.11.5/Python/ceval.c:3951\r\n_PyEval_EvalFrame at /usr/local/src/conda/python-3.11.5/Include/internal/pycore_ceval.h:73 [inlined]\r\n_PyEval_Vector at /usr/local/src/conda/python-3.11.5/Python/ceval.c:6439\r\nPyEval_EvalCode at /usr/local/src/conda/python-3.11.5/Python/ceval.c:1154\r\nbuiltin_exec_impl at /usr/local/src/conda/python-3.11.5/Python/bltinmodule.c:1077 [inlined]\r\nbuiltin_exec at /usr/local/src/conda/python-3.11.5/Python/clinic/bltinmodule.c.h:465\r\ncfunction_vectorcall_FASTCALL_KEYWORDS at /usr/local/src/conda/python-3.11.5/Objects/methodobject.c:443\r\ndo_call_core at /usr/local/src/conda/python-3.11.5/Python/ceval.c:7329 [inlined]\r\n_PyEval_EvalFrameDefault at /usr/local/src/conda/python-3.11.5/Python/ceval.c:5381\r\n_PyEval_EvalFrame at /usr/local/src/conda/python-3.11.5/Include/internal/pycore_ceval.h:73 [inlined]\r\n_PyEval_Vector at /usr/local/src/conda/python-3.11.5/Python/ceval.c:6439 [inlined]\r\n_PyFunction_Vectorcall at /usr/local/src/conda/python-3.11.5/Objects/call.c:393\r\n_PyObject_VectorcallTstate at /usr/local/src/conda/python-3.11.5/Include/internal/pycore_call.h:92 [inlined]\r\nobject_vacall at /usr/local/src/conda/python-3.11.5/Objects/call.c:819\r\nPyObject_CallMethodObjArgs at /usr/local/src/conda/python-3.11.5/Objects/call.c:879\r\nimport_find_and_load at /usr/local/src/conda/python-3.11.5/Python/import.c:1737 [inlined]\r\nPyImport_ImportModuleLevelObject at /usr/local/src/conda/python-3.11.5/Python/import.c:1836\r\nimport_name at /usr/local/src/conda/python-3.11.5/Python/ceval.c:7429 [inlined]\r\n_PyEval_EvalFrameDefault at /usr/local/src/conda/python-3.11.5/Python/ceval.c:3951\r\n_PyEval_EvalFrame at /usr/local/src/conda/python-3.11.5/Include/internal/pycore_ceval.h:73 [inlined]\r\n_PyEval_Vector at /usr/local/src/conda/python-3.11.5/Python/ceval.c:6439\r\nPyEval_EvalCode at /usr/local/src/conda/python-3.11.5/Python/ceval.c:1154\r\nbuiltin_exec_impl at /usr/local/src/conda/python-3.11.5/Python/bltinmodule.c:1077 [inlined]\r\nbuiltin_exec at /usr/local/src/conda/python-3.11.5/Python/clinic/bltinmodule.c.h:465\r\ncfunction_vectorcall_FASTCALL_KEYWORDS at /usr/local/src/conda/python-3.11.5/Objects/methodobject.c:443\r\n_PyObject_VectorcallTstate at /usr/local/src/conda/python-3.11.5/Include/internal/pycore_call.h:92 [inlined]\r\nPyObject_Vectorcall at /usr/local/src/conda/python-3.11.5/Objects/call.c:299\r\n_PyEval_EvalFrameDefault at /usr/local/src/conda/python-3.11.5/Python/ceval.c:4774\r\n_PyEval_EvalFrame at /usr/local/src/conda/python-3.11.5/Include/internal/pycore_ceval.h:73 [inlined]\r\ngen_send_ex2 at /usr/local/src/conda/python-3.11.5/Objects/genobject.c:219\r\n_PyEval_EvalFrameDefault at /usr/local/src/conda/python-3.11.5/Python/ceval.c:2591\r\n_PyEval_EvalFrame at /usr/local/src/conda/python-3.11.5/Include/internal/pycore_ceval.h:73 [inlined]\r\ngen_send_ex2 at /usr/local/src/conda/python-3.11.5/Objects/genobject.c:219\r\n_PyEval_EvalFrameDefault at /usr/local/src/conda/python-3.11.5/Python/ceval.c:2591\r\n_PyEval_EvalFrame at /usr/local/src/conda/python-3.11.5/Include/internal/pycore_ceval.h:73 [inlined]\r\ngen_send_ex2 at /usr/local/src/conda/python-3.11.5/Objects/genobject.c:219\r\ngen_send_ex at /usr/local/src/conda/python-3.11.5/Objects/genobject.c:287\r\nmethod_vectorcall_O at /usr/local/src/conda/python-3.11.5/Objects/descrobject.c:481\r\n_PyObject_VectorcallTstate at /usr/local/src/conda/python-3.11.5/Include/internal/pycore_call.h:92 [inlined]\r\nPyObject_Vectorcall at /usr/local/src/conda/python-3.11.5/Objects/call.c:299\r\n_PyEval_EvalFrameDefault at /usr/local/src/conda/python-3.11.5/Python/ceval.c:4774\r\n_PyEval_EvalFrame at /usr/local/src/conda/python-3.11.5/Include/internal/pycore_ceval.h:73 [inlined]\r\n_PyEval_Vector at /usr/local/src/conda/python-3.11.5/Python/ceval.c:6439 [inlined]\r\n_PyFunction_Vectorcall at /usr/local/src/conda/python-3.11.5/Objects/call.c:393 [inlined]\r\n_PyObject_VectorcallTstate at /usr/local/src/conda/python-3.11.5/Include/internal/pycore_call.h:92\r\nmethod_vectorcall at /usr/local/src/conda/python-3.11.5/Objects/classobject.c:59\r\n_PyVectorcall_Call at /usr/local/src/conda/python-3.11.5/Objects/call.c:257 [inlined]\r\n_PyObject_Call at /usr/local/src/conda/python-3.11.5/Objects/call.c:328 [inlined]\r\nPyObject_Call at /usr/local/src/conda/python-3.11.5/Objects/call.c:355\r\ndo_call_core at /usr/local/src/conda/python-3.11.5/Python/ceval.c:7357 [inlined]\r\n_PyEval_EvalFrameDefault at /usr/local/src/conda/python-3.11.5/Python/ceval.c:5381\r\n_PyEval_EvalFrame at /usr/local/src/conda/python-3.11.5/Include/internal/pycore_ceval.h:73 [inlined]\r\n_PyEval_Vector at /usr/local/src/conda/python-3.11.5/Python/ceval.c:6439\r\nPyEval_EvalCode at /usr/local/src/conda/python-3.11.5/Python/ceval.c:1154\r\nrun_eval_code_obj at /usr/local/src/conda/python-3.11.5/Python/pythonrun.c:1712\r\nrun_mod at /usr/local/src/conda/python-3.11.5/Python/pythonrun.c:1733\r\npyrun_file at /usr/local/src/conda/python-3.11.5/Python/pythonrun.c:1628\r\n_PyRun_SimpleFileObject at /usr/local/src/conda/python-3.11.5/Python/pythonrun.c:440\r\n_PyRun_AnyFileObject at /usr/local/src/conda/python-3.11.5/Python/pythonrun.c:79\r\npymain_run_file_obj at /usr/local/src/conda/python-3.11.5/Modules/main.c:360 [inlined]\r\npymain_run_file at /usr/local/src/conda/python-3.11.5/Modules/main.c:379 [inlined]\r\npymain_run_python at /usr/local/src/conda/python-3.11.5/Modules/main.c:601 [inlined]\r\nPy_RunMain at /usr/local/src/conda/python-3.11.5/Modules/main.c:680\r\nPy_BytesMain at /usr/local/src/conda/python-3.11.5/Modules/main.c:734\r\n__libc_start_main at /lib/x86_64-linux-gnu/libc.so.6 (unknown line)\r\n_start at /home/ubuntu/storage1/anaconda3/bin/python (unknown line)\r\nAllocations: 2906 (Pool: 2897; Big: 9); GC: 0\r\n[1]    3793 segmentation fault (core dumped)  ipython\r\n```\r\n\r\nSincerely,\r\nEd",
              "createdAt": "2024-04-19T01:48:10Z"
            },
            {
              "author": {
                "login": "MilesCranmer"
              },
              "body": "Strange... What happens if you just do\r\n\r\n```bash\r\njulia --project=~/storage1/anaconda3/julia_env/ -e 'using Pkg; Pkg.instantiate(); Pkg.precompile()'\r\n```\r\n\r\nThis should do it directly on the Julia side. If it segfaults there then it might point to a different problem instead.",
              "createdAt": "2024-04-19T05:42:12Z"
            },
            {
              "author": {
                "login": "MilesCranmer"
              },
              "body": "Might be good to also raise this on PythonCall.jl issues: https://github.com/JuliaPy/PythonCall.jl since it is segfaulting right at import (so is likely an issue on PythonCall.jl rather than PySR). It will likely get good insights from the maintainer of that package. But happy to try to fix it here simultaneously.",
              "createdAt": "2024-04-19T05:44:10Z"
            },
            {
              "author": {
                "login": "ewijaya"
              },
              "body": "> Strange... What happens if you just do\r\n> \r\n> ```shell\r\n> julia --project=~/storage1/anaconda3/julia_env/ -e 'using Pkg; Pkg.instantiate(); Pkg.precompile()'\r\n> ```\r\n> \r\n> This should do it directly on the Julia side. If it segfaults there then it might point to a different problem instead.\r\n\r\nI tried your command. It has no problem:\r\n\r\n```\r\n$ julia --project=~/storage1/anaconda3/julia_env/ -e 'using Pkg; Pkg.instantiate(); Pkg.precompile()'\r\nPrecompiling project...\r\n  17 dependencies successfully precompiled in 62 seconds. 61 already precompiled.\r\n```",
              "createdAt": "2024-04-19T08:26:56Z"
            },
            {
              "author": {
                "login": "MilesCranmer"
              },
              "body": "So it looks like it compiled them all which is interesting, so at least part of it worked. That `julia` you are running is the one from your BINDIR right?\r\n\r\nCan you run juliacall directly? Like just do:\r\n\r\n```bash\r\npython -c 'from juliacall import Main as jl; jl.println(\"Hello World!\")'\r\n```\r\n\r\nIt would also be interesting to hear if other Python versions work for you or not... I kind of wonder if it's some glibc issue in your environment.",
              "createdAt": "2024-04-19T09:45:01Z"
            }
          ],
          "pageInfo": {
            "hasNextPage": false,
            "endCursor": "Y3Vyc29yOnYyOpHOeyf0rw=="
          }
        }
      }
    }
  }
}